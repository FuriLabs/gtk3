From: Thomas Jost <schnouki@schnouki.net>
Date: Tue, 3 Jan 2023 17:09:04 +0100
Subject: Treat XKB_MOD_NAME_LOGO as super key

Loosely based on !5304, which fixes #4913 for GTK3.

Bug: https://gitlab.gnome.org/GNOME/gtk/-/issues/4913
Origin: upstream, 3.24.37, commit:0f55e9552fbd9a248bc180d83c885066bd6e899d
---
 gdk/wayland/gdkkeys-wayland.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/gdk/wayland/gdkkeys-wayland.c b/gdk/wayland/gdkkeys-wayland.c
index 0013f7c..789fa2b 100644
--- a/gdk/wayland/gdkkeys-wayland.c
+++ b/gdk/wayland/gdkkeys-wayland.c
@@ -296,7 +296,7 @@ get_gdk_modifiers (struct xkb_keymap *xkb_keymap,
   if (mods & (1 << xkb_keymap_mod_get_index (xkb_keymap, "Mod3")))
     state |= GDK_MOD3_MASK;
   if (mods & (1 << xkb_keymap_mod_get_index (xkb_keymap, XKB_MOD_NAME_LOGO)))
-    state |= GDK_MOD4_MASK;
+    state |= GDK_MOD4_MASK | GDK_SUPER_MASK;
   if (mods & (1 << xkb_keymap_mod_get_index (xkb_keymap, "Mod5")))
     state |= GDK_MOD5_MASK;
   if (mods & (1 << xkb_keymap_mod_get_index (xkb_keymap, "Super")))
@@ -384,7 +384,7 @@ gdk_wayland_keymap_add_virtual_modifiers (GdkKeymap       *keymap,
   xkb_mod_index_t idx;
   uint32_t mods, real;
   struct { const char *name; GdkModifierType mask; } vmods[] = {
-    { "Super", GDK_SUPER_MASK },
+    { "Super", GDK_SUPER_MASK | GDK_MOD4_MASK },
     { "Hyper", GDK_HYPER_MASK },
     { "Meta", GDK_META_MASK },
     { NULL, 0 }
