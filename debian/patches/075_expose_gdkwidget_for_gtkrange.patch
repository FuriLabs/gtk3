From 567bbeb4c639aa55bfe4cb70919623f1931b9357 Mon Sep 17 00:00:00 2001
From: Didier Roche <didrocks@ubuntu.com>
Date: Fri, 8 Oct 2010 18:54:44 +0200
Subject: [PATCH] Add gtk_range_get_event_window to get the event_window for a GtkRange

This is useful when you try to build your own widget based on GtkRange and then,
should access to the GdkWindow.
---
 docs/reference/gtk/gtk3-sections.txt |    1 +
 gtk/gtk.symbols                      |    1 +
 gtk/gtkrange.c                       |   19 +++++++++++++++++++
 gtk/gtkrange.h                       |    1 +
 4 files changed, 22 insertions(+), 0 deletions(-)

Index: gtk+3.0-2.91.2/docs/reference/gtk/gtk3-sections.txt
===================================================================
--- gtk+3.0-2.91.2.orig/docs/reference/gtk/gtk3-sections.txt	2010-10-29 16:43:56.172046204 -0400
+++ gtk+3.0-2.91.2/docs/reference/gtk/gtk3-sections.txt	2010-10-29 16:44:07.000000000 -0400
@@ -2453,6 +2453,7 @@
 gtk_range_get_slider_size_fixed
 gtk_range_set_min_slider_size
 gtk_range_set_slider_size_fixed
+gtk_range_get_event_window
 
 <SUBSECTION Standard>
 GTK_RANGE
Index: gtk+3.0-2.91.2/gtk/gtk.symbols
===================================================================
--- gtk+3.0-2.91.2.orig/gtk/gtk.symbols	2010-10-29 16:44:07.000000000 -0400
+++ gtk+3.0-2.91.2/gtk/gtk.symbols	2010-10-29 16:44:07.000000000 -0400
@@ -2639,6 +2639,7 @@
 #if IN_HEADER(__GTK_RANGE_H__)
 #if IN_FILE(__GTK_RANGE_C__)
 gtk_range_get_adjustment
+gtk_range_get_event_window
 gtk_range_get_fill_level
 gtk_range_get_flippable
 gtk_range_get_inverted
Index: gtk+3.0-2.91.2/gtk/gtkrange.c
===================================================================
--- gtk+3.0-2.91.2.orig/gtk/gtkrange.c	2010-10-29 16:43:56.120046204 -0400
+++ gtk+3.0-2.91.2/gtk/gtkrange.c	2010-10-29 16:59:43.552046206 -0400
@@ -4107,6 +4107,26 @@
     }
 }
 
+/**
+ * gtk_range_get_event_window:
+ * @range: a #GtkRange
+ *
+ * Returns the range's event window if it is realized, %NULL otherwise.
+ * This function should be rarely needed.
+ *
+ * Return value: (transfer none): @range's event window.
+ *
+ * Since: 2.24
+ */
+GdkWindow*
+gtk_range_get_event_window (GtkRange *range)
+{
+  g_return_val_if_fail (GTK_IS_RANGE (range), NULL);
+  GtkRangePrivate *priv = range->priv;
+
+  return priv->event_window;
+}
+
 void
 _gtk_range_set_stop_values (GtkRange *range,
                             gdouble  *values,
Index: gtk+3.0-2.91.2/gtk/gtkrange.h
===================================================================
--- gtk+3.0-2.91.2.orig/gtk/gtkrange.h	2010-10-29 16:43:56.064046204 -0400
+++ gtk+3.0-2.91.2/gtk/gtkrange.h	2010-10-29 16:44:07.000000000 -0400
@@ -147,6 +147,7 @@
 void               gtk_range_set_fill_level                (GtkRange      *range,
                                                             gdouble        fill_level);
 gdouble            gtk_range_get_fill_level                (GtkRange      *range);
+GdkWindow*         gtk_range_get_event_window              (GtkRange      *range);
 
 /* internal API */
 gdouble            _gtk_range_get_wheel_delta              (GtkRange      *range,
