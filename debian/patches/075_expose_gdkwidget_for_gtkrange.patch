From 567bbeb4c639aa55bfe4cb70919623f1931b9357 Mon Sep 17 00:00:00 2001
From: Didier Roche <didrocks@ubuntu.com>
Date: Fri, 8 Oct 2010 18:54:44 +0200
Subject: [PATCH] Add gtk_range_get_event_window to get the event_window for a GtkRange

This is useful when you try to build your own widget based on GtkRange and then,
should access to the GdkWindow.
---
 docs/reference/gtk/gtk3-sections.txt |    1 +
 gtk/gtk.symbols                      |    1 +
 gtk/gtkrange.c                       |   19 +++++++++++++++++++
 gtk/gtkrange.h                       |    1 +
 4 files changed, 22 insertions(+), 0 deletions(-)

diff --git a/docs/reference/gtk/gtk3-sections.txt b/docs/reference/gtk/gtk3-sections.txt
index ad27a06..45cd2b9 100644
--- a/docs/reference/gtk/gtk3-sections.txt
+++ b/docs/reference/gtk/gtk3-sections.txt
@@ -2437,6 +2437,7 @@ gtk_range_get_slider_range
 gtk_range_get_slider_size_fixed
 gtk_range_set_min_slider_size
 gtk_range_set_slider_size_fixed
+gtk_range_get_event_window
 
 <SUBSECTION Standard>
 GTK_RANGE
diff --git a/gtk/gtk.symbols b/gtk/gtk.symbols
index fce5e72..5cf12d0 100644
--- a/gtk/gtk.symbols
+++ b/gtk/gtk.symbols
@@ -2616,6 +2616,7 @@ gtk_radio_tool_button_set_group
 #if IN_HEADER(__GTK_RANGE_H__)
 #if IN_FILE(__GTK_RANGE_C__)
 gtk_range_get_adjustment
+gtk_range_get_event_window
 gtk_range_get_fill_level
 gtk_range_get_flippable
 gtk_range_get_inverted
diff --git a/gtk/gtkrange.c b/gtk/gtkrange.c
index fd9ae0e..66a3d77 100644
--- a/gtk/gtkrange.c
+++ b/gtk/gtkrange.c
@@ -3999,6 +3999,25 @@ gtk_range_remove_update_timer (GtkRange *range)
     }
 }
 
+/**
+ * gtk_range_get_event_window:
+ * @range: a #GtkRange
+ *
+ * Returns the range's event window if it is realized, %NULL otherwise.
+ * This function should be rarely needed.
+ *
+ * Return value: (transfer none): @range's event window.
+ *
+ * Since: 2.24
+ */
+GdkWindow*
+gtk_range_get_event_window (GtkRange *range)
+{
+  g_return_val_if_fail (GTK_IS_RANGE (range), NULL);
+
+  return range->event_window;
+}
+
 void
 _gtk_range_set_stop_values (GtkRange *range,
                             gdouble  *values,
diff --git a/gtk/gtkrange.h b/gtk/gtkrange.h
index f2b91b8..ebe77c0 100644
--- a/gtk/gtkrange.h
+++ b/gtk/gtkrange.h
@@ -146,6 +146,7 @@ gboolean           gtk_range_get_restrict_to_fill_level    (GtkRange      *range
 void               gtk_range_set_fill_level                (GtkRange      *range,
                                                             gdouble        fill_level);
 gdouble            gtk_range_get_fill_level                (GtkRange      *range);
+GdkWindow*         gtk_range_get_event_window              (GtkRange      *range);
 
 /* internal API */
 gdouble            _gtk_range_get_wheel_delta              (GtkRange      *range,
-- 
1.7.1

