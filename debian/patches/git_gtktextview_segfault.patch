From ca2368dba958d6fecf2fce417307bb9cbbe6eb6b Mon Sep 17 00:00:00 2001
From: Giovanni Campagna <gcampagna@src.gnome.org>
Date: Wed, 06 Mar 2013 16:04:23 +0000
Subject: GtkTextView: don't popdown a bubble if we don't have one

This causes a segfault.

https://bugzilla.gnome.org/show_bug.cgi?id=695304
---
diff --git a/gtk/gtktextview.c b/gtk/gtktextview.c
index 1a0b560..2de8a1e 100644
--- a/gtk/gtktextview.c
+++ b/gtk/gtktextview.c
@@ -9101,7 +9101,8 @@ text_window_scroll        (GtkTextWindow *win,
 
   if (dx != 0 || dy != 0)
     {
-      _gtk_bubble_window_popdown (GTK_BUBBLE_WINDOW (priv->selection_bubble));
+      if (priv->selection_bubble)
+        _gtk_bubble_window_popdown (GTK_BUBBLE_WINDOW (priv->selection_bubble));
       gdk_window_scroll (win->bin_window, dx, dy);
     }
 }
--
cgit v0.9.1

